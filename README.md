# Публикация комиксов в группе VK

Скрипт для скачивания комиксов с xkcd.com и публикации в группе соц. сети "ВКонтакте"

## Как установить

Для запуска приложения нужен предустановленный Python версии не ниже 3.8+ (на других версиях не проверялся).
Также в программе используются следующие сторонние библиотеки:
- [requests](https://requests.readthedocs.io/en/latest/)
- [python-dotenv](https://saurabh-kumar.com/python-dotenv/)

Рекомендуется устанавливать зависимости в виртуальном окружении, используя [venv](https://docs.python.org/3/library/venv.html) или любую другую реализацию, например, [virtualenv](https://github.com/pypa/virtualenv).

1. Скопируйте репозиторий в текущий каталог. Воспользуйтесь командой:
```bash
$ git clone https://github.com/igorzakhar/vk-comics-publisher.git
```

После этого программа будет скопирована в каталог ```vk-comics-publisher```.

2. Создайте и активируйте виртуальное окружение:
```bash
$ cd vk-comics-publisher # Переходим в каталог с программой
$ python3 -m venv my_virtual_environment # Создаем виртуальное окружение
$ source my_virtual_environment/bin/activate # Активируем виртуальное окружение
```

3. Установите сторонние библиотеки  из файла зависимостей:
```bash
$ pip install -r requirements.txt # В качестве альтернативы используйте pip3
```

## Настройка приложения

Создайте группу Вконтакте, в которую будете выкладывать комиксы: [ссылка на управление группами VK](https://vk.com/groups?tab=admin).

Есть много способов взаимодействия с API Вконтакте и много способов получения ключей. Для постинга на стену нужен ключ доступа пользователя. Чтобы его получить, ВКонтакте хочет “приложение”. Создайте его на странице Вконтакте для разработчиков. Было бы хорошо заполнить его реальными данными, а не случайными.

Создать приложение можно в разделе "Мои приложения". Ссылка на него в шапке страницы. [Страница для разработчиков](https://vk.com/dev).

В качестве типа приложения следует указать ```standalone``` — это подходящий тип для приложений, которые просто запускаются на компьютере.

Чтобы работать со своим приложением, надо знать его ```client_id```. Иначе сервер не поймёт, от имени какого приложения вы хотите работать. Если нажать на кнопку “Редактировать” для нового приложения, в адресной строке вы увидите его ```client_id```. Это не секретная информация, но лучше всё равно сохраните её в безопасном месте.

Получите ключ доступа пользователя. Он нужен для того, чтобы ваше приложение имело доступ к вашему аккаунту и могло публиковать сообщения в группах. Ключ можно получить вручную, не написав ни строчки кода. Вам потребуются следующие права: ```photos```, ```groups```, ```wall``` и ```offline```.

Токен выглядит как строка наподобие ```533bacf01e1165b57531ad114461ae8736d6506a3```, она появится в адресной строке, подписанная как ```access_token```.

[Implicit Flow для получения ключа доступа пользователя](https://vk.com/dev/implicit_flow_user):
- Так как вы используете standalone приложение, для получения ключа пользователя стоит использовать [Implicit Flow](https://vk.com/dev/implicit_flow_user);
- Убрать параметр ```redirect_uri``` у запроса на ключ;
- Параметр ```scope``` указать через запятую, вот так: ```scope=photos,groups,wall,offline```.

### Переменные окружения

Когда все данные будут у вас на руках, переименуйте файл ```.env.example```в ```.env``` и добавьте значения переменных окружения:
```
VK_GROUP_ID=<номер созданной группы ВК>
VK_VERSION_API=<версия api ВК>
VK_ACCESS_TOKEN=<ключ доступа пользователя>
```

- Узнать ```group_id``` для вашей группы можно [здесь](https://regvk.com/id/).
- Номер версии API VK на момент публикации приложения ```5.131```.


## Запуск приложения

Пример запуска приложения:

```bash
$ python main.py
```


### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).